var p=Object.defineProperty;var y=(t,e,i)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var o=(t,e,i)=>(y(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const h=document.body,d=document.documentElement,I=(t="img")=>new Promise(e=>{imagesLoaded(document.querySelectorAll(t),{background:!0},e)}),u=(t,e,i)=>(1-i)*t+i*e,w=(t,e,i,l)=>Math.hypot(i-t,l-e),g=t=>{let e=0,i=0;return t||(t=window.event),t.touches?t.touches.length>0&&(e=t.touches[0].pageX,i=t.touches[0].pageY):t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+h.scrollLeft+d.scrollLeft,i=t.clientY+h.scrollTop+d.scrollTop),{x:e,y:i}},v=(t,e)=>w(t.x,t.y,e.x,e.y),x=(t,e,i)=>{const l=Math.abs(e)%i.length;return t-l>=0?t-l:i.length-(l-t)};class M{constructor(e){o(this,"DOM",{el:null,inner:null});o(this,"defaultStyle",{scale:1,x:0,y:0,opacity:0});o(this,"timeline",null);o(this,"rect",null);this.DOM.el=e,this.DOM.inner=this.DOM.el.querySelector(".content__img-inner"),this.getRect(),this.initEvents()}initEvents(){this.resize=()=>{gsap.set(this.DOM.el,this.defaultStyle),this.getRect()},window.addEventListener("resize",()=>this.resize())}getRect(){this.rect=this.DOM.el.getBoundingClientRect()}}let n,m,a;n={x:0,y:0};a={...n};m={...n};const f=t=>{t.touches?n=g(t.touches[0]):n=g(t)};window.addEventListener("mousemove",f);window.addEventListener("touchmove",f);class O{constructor(e){o(this,"DOM",{el:null});o(this,"images",[]);o(this,"imagesTotal",0);o(this,"imgPosition",0);o(this,"zIndexVal",1);o(this,"activeImagesCount",0);o(this,"isIdle",!0);o(this,"visibleImagesCount",0);o(this,"threshold",80);o(this,"visibleImagesTotal",9);o(this,"onImageActivated",()=>{this.activeImagesCount++,this.isIdle=!1});o(this,"onImageDeactivated",()=>{this.activeImagesCount--});this.DOM.el=e,this.images=[...this.DOM.el.querySelectorAll(".content__img")].map(l=>new M(l)),this.imagesTotal=this.images.length,this.visibleImagesTotal=Math.min(this.visibleImagesTotal,this.imagesTotal-1);const i=()=>{a={...n},requestAnimationFrame(()=>this.render()),window.removeEventListener("mousemove",i),window.removeEventListener("touchmove",i)};window.addEventListener("mousemove",i),window.addEventListener("touchmove",i)}render(){let e=v(n,m);a.x=u(a.x||n.x,n.x,.3),a.y=u(a.y||n.y,n.y,.3),e>this.threshold&&(this.showNextImage(),m=n),this.isIdle&&this.zIndexVal!==1&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;const e=this.images[this.imgPosition];++this.visibleImagesCount,gsap.killTweensOf(e.DOM.el);const i=gsap.utils.random(.5,1.6);if(e.timeline=gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{scale:i-Math.max(gsap.utils.random(.2,.6),0),rotationZ:0,opacity:1,zIndex:this.zIndexVal,x:a.x-e.rect.width/2,y:a.y-e.rect.height/2},{duration:.4,ease:"power3",scale:i,rotationZ:gsap.utils.random(-3,3),x:n.x-e.rect.width/2,y:n.y-e.rect.height/2},0),this.visibleImagesCount>=this.visibleImagesTotal){const l=x(this.imgPosition,this.visibleImagesTotal,this.images),s=this.images[l];gsap.to(s.DOM.el,{duration:.4,ease:"power4",opacity:0,scale:1.3,onComplete:()=>{this.activeImagesCount===0&&(this.isIdle=!0)}})}}}I(".content__img-inner").then(()=>{document.body.classList.remove("loading"),new O(document.querySelector(".content"))});
